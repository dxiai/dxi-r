<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Einführung in die Datenwissenschaft mit R - 8&nbsp; Variablen, Funktionen und Operatoren</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../kapitel/zeichenketten/kapitel.html" rel="next">
<link href="../../kapitel/daten-importieren-exportieren/kapitel.html" rel="prev">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "Keine Treffer",
    "search-matching-documents-text": "Treffer",
    "search-copy-link-title": "Link in die Suche kopieren",
    "search-hide-matches-text": "Zusätzliche Treffer verbergen",
    "search-more-match-text": "weitere Treffer in diesem Dokument",
    "search-more-matches-text": "weitere Treffer in diesem Dokument",
    "search-clear-button-title": "Zurücksetzen",
    "search-detached-cancel-button-title": "Abbrechen",
    "search-submit-button-title": "Abschicken",
    "search-label": "Suchen"
  }
}</script>

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css">

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../kapitel/variablen/kapitel.html">Mathematik der Daten</a></li><li class="breadcrumb-item"><a href="../../kapitel/variablen/kapitel.html"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Variablen, Funktionen und Operatoren</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../../">Einführung in die Datenwissenschaft mit R</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/dxiai/dxi-r" rel="" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Suchen"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Vorwort</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../kapitel/einleitung/kapitel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Einleitung</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../kapitel/tool-chain/installation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Tool Chain</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../kapitel/tool-chain/hilfe.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Hilfe bekommen</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../kapitel/tool-chain/language.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">R-Sprachelemente</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Datenquellen</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../kapitel/daten-organisieren/kapitel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Dokumentation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../kapitel/datentypen/kapitel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Datentypen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../kapitel/daten-importieren-exportieren/kapitel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Importieren und Exportieren</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Mathematik der Daten</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../kapitel/variablen/kapitel.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Variablen, Funktionen und Operatoren</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../kapitel/zeichenketten/kapitel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Zeichenketten</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../kapitel/faktoren/kapitel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Faktoren</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../kapitel/boolsche-operationen/kapitel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Boole’sche Operationen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../kapitel/vektor-operationen/kapitel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Vektoroperationen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../kapitel/matrix-operationen/kapitel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Matrix-Operationen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../kapitel/indizieren-gruppieren/kapitel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Indizieren und Gruppieren</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../kapitel/daten-kodieren/kapitel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Daten kodieren</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../kapitel/daten-formen/kapitel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Daten formen</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Deskriptive Datenanalyse</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../kapitel/daten-beschreiben/kapitel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Daten beschreiben</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../kapitel/daten-visualisieren/kapitel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Daten visualisieren</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Referenzen</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Inhaltsverzeichnis</h2>
   
  <ul>
  <li><a href="#variablen" id="toc-variablen" class="nav-link active" data-scroll-target="#variablen"><span class="header-section-number">8.1</span> Variablen</a></li>
  <li><a href="#funktionen" id="toc-funktionen" class="nav-link" data-scroll-target="#funktionen"><span class="header-section-number">8.2</span> Funktionen</a>
  <ul class="collapse">
  <li><a href="#identätsfunktion" id="toc-identätsfunktion" class="nav-link" data-scroll-target="#identätsfunktion"><span class="header-section-number">8.2.1</span> Identätsfunktion</a></li>
  <li><a href="#transformationen" id="toc-transformationen" class="nav-link" data-scroll-target="#transformationen"><span class="header-section-number">8.2.2</span> Transformationen</a></li>
  <li><a href="#aggregatoren" id="toc-aggregatoren" class="nav-link" data-scroll-target="#aggregatoren"><span class="header-section-number">8.2.3</span> Aggregatoren</a></li>
  <li><a href="#transformationsverben" id="toc-transformationsverben" class="nav-link" data-scroll-target="#transformationsverben"><span class="header-section-number">8.2.4</span> Transformationsverben</a></li>
  <li><a href="#generatoren" id="toc-generatoren" class="nav-link" data-scroll-target="#generatoren"><span class="header-section-number">8.2.5</span> Generatoren</a></li>
  </ul></li>
  <li><a href="#operatoren" id="toc-operatoren" class="nav-link" data-scroll-target="#operatoren"><span class="header-section-number">8.3</span> Operatoren</a>
  <ul class="collapse">
  <li><a href="#zuweisung" id="toc-zuweisung" class="nav-link" data-scroll-target="#zuweisung"><span class="header-section-number">8.3.1</span> Zuweisung</a></li>
  <li><a href="#funktionsausführung" id="toc-funktionsausführung" class="nav-link" data-scroll-target="#funktionsausführung"><span class="header-section-number">8.3.2</span> Funktionsausführung</a></li>
  </ul></li>
  <li><a href="#sec-fkt-ketten" id="toc-sec-fkt-ketten" class="nav-link" data-scroll-target="#sec-fkt-ketten"><span class="header-section-number">8.4</span> Funktionsketten</a></li>
  <li><a href="#eigene-funktionen-erstellen" id="toc-eigene-funktionen-erstellen" class="nav-link" data-scroll-target="#eigene-funktionen-erstellen"><span class="header-section-number">8.5</span> Eigene Funktionen erstellen</a>
  <ul class="collapse">
  <li><a href="#parameter-und-variablen" id="toc-parameter-und-variablen" class="nav-link" data-scroll-target="#parameter-und-variablen"><span class="header-section-number">8.5.1</span> Parameter und Variablen</a></li>
  <li><a href="#datentypen-überprüfen" id="toc-datentypen-überprüfen" class="nav-link" data-scroll-target="#datentypen-überprüfen"><span class="header-section-number">8.5.2</span> Datentypen überprüfen</a></li>
  <li><a href="#sec-nebeneffekte" id="toc-sec-nebeneffekte" class="nav-link" data-scroll-target="#sec-nebeneffekte"><span class="header-section-number">8.5.3</span> Nebeneffekte</a></li>
  </ul></li>
  <li><a href="#funktionen-als-werte" id="toc-funktionen-als-werte" class="nav-link" data-scroll-target="#funktionen-als-werte"><span class="header-section-number">8.6</span> Funktionen als Werte</a>
  <ul class="collapse">
  <li><a href="#callbacks" id="toc-callbacks" class="nav-link" data-scroll-target="#callbacks"><span class="header-section-number">8.6.1</span> Callbacks</a></li>
  <li><a href="#closures" id="toc-closures" class="nav-link" data-scroll-target="#closures"><span class="header-section-number">8.6.2</span> Closures</a></li>
  </ul></li>
  <li><a href="#bibliotheken" id="toc-bibliotheken" class="nav-link" data-scroll-target="#bibliotheken"><span class="header-section-number">8.7</span> Bibliotheken</a></li>
  <li><a href="#bibliotheken-verwalten" id="toc-bibliotheken-verwalten" class="nav-link" data-scroll-target="#bibliotheken-verwalten"><span class="header-section-number">8.8</span> Bibliotheken verwalten</a>
  <ul class="collapse">
  <li><a href="#projektvorbereitung" id="toc-projektvorbereitung" class="nav-link" data-scroll-target="#projektvorbereitung"><span class="header-section-number">8.8.1</span> Projektvorbereitung</a></li>
  <li><a href="#bibliotheken-installieren" id="toc-bibliotheken-installieren" class="nav-link" data-scroll-target="#bibliotheken-installieren"><span class="header-section-number">8.8.2</span> Bibliotheken installieren</a></li>
  <li><a href="#bibliotheken-updaten" id="toc-bibliotheken-updaten" class="nav-link" data-scroll-target="#bibliotheken-updaten"><span class="header-section-number">8.8.3</span> Bibliotheken updaten</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/dxiai/dxi-r/issues/new" class="toc-action">Problem melden</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-chapter-variablen" class="quarto-section-identifier"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Variablen, Funktionen und Operatoren</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="variablen" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="variablen"><span class="header-section-number">8.1</span> Variablen</h2>
<p>Variablen sind spezielle R Symbole (s. <a href="../tool-chain/language.html"><span>Kapitel&nbsp;4</span></a>) mit denen Werte für die spätere Verwendung markiert werden. Variablen sind also <strong>Bezeichner</strong>, welche die eigentlichen Werte <strong>substituieren</strong>.</p>
<p>Damit eine Variable einen Wert substituieren kann, muss der Wert der Variablen <em>zugewiesen</em> werden. Ein Wert kann dabei ein einzelner Wert eines fundamentalen Datentyps oder eine komplexe Datenstruktur sein.</p>
<p>Bei der ersten Zuweisung wird eine Variable <em>deklariert</em> (<a href="../tool-chain/language.html#def-deklaration">Definition&nbsp;<span>4.3</span></a>).</p>
<div id="exm-var-zuweisen" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 8.1 (Den Wert 1 der Variable <code>var1</code> zuweisen) </strong></span>&nbsp;</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>var1 <span class="ot">=</span> <span class="dv">1</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Variablen müssen in einem Geltungsbereich <em>eindeutig</em> sein. Wird nämlich einer Variable mehrfach zugewiesen, dann ist der Wert einer Variablen der Wert der letzten Zuweisung.</p>
<p>Der <strong>Geltungsbereich</strong> (engl. Scope) einer Variablen wird durch Funktionskörper definiert. R kennt dabei drei Arten von Geltungsbereichen. In diesem Zusammenhang spricht man von äusseren (engl. <em>outer scope</em>) und inneren Geltungsbereichen (engl. <em>inner scope</em>).</p>
<p>Grundsätzlich können alle Variablen in einem Geltungsbereich verwendet werden, die in einem der äusseren Geltungsbereiche deklariert und zugewiesen wurden. Variablen der inneren Geltungsbereiche sind in den äusseren Geltungsbereichen <em>nicht verfügbar</em>.</p>
<p>Der <strong>globale Geltungsbereich</strong> gilt für alle Variablen, die ausserhalb einer Funktion oder einer Bibliothek erzeugt werden.</p>
<p>Der <strong>Funktionsgeltungsbereich</strong> ist auf den Funktionsköper einer Funktion beschränkt.</p>
<p>Der <strong>Modulgeltungsbereich</strong> ist der globale Geltungsbereich einer Funktionsbibliothek. Variablen dieses Geltungsbereichs sind im globalen Geltungsbereich eines R-Scripts nicht erreichbar. In der Praxis spielt dieser Geltungsbereich eine untergeordnete Rolle</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warnung
</div>
</div>
<div class="callout-body-container callout-body">
<p>Die letzte Zuweisung ist nicht zwingend die Zuweisung, die als letztes im Code erscheint.</p>
</div>
</div>
</section>
<section id="funktionen" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="funktionen"><span class="header-section-number">8.2</span> Funktionen</h2>
<p>In R bilden Funktionen die Grundlage für die Datenverarbeitung. Fast alle Spracheelemente sind als Funktionen umgesetzt.</p>
<section id="identätsfunktion" class="level3" data-number="8.2.1">
<h3 data-number="8.2.1" class="anchored" data-anchor-id="identätsfunktion"><span class="header-section-number">8.2.1</span> Identätsfunktion</h3>
<p>R hat eine explizite Identitätsfunktion <code>identity()</code>. Diese Funktion setzt die Identität für einen Parameter um. Die Funktion wird zur allgemeinen Identitätsfunktion, indem die Parameterliste als Liste übergeben.</p>
<div id="exm-mehrparametrische-identität" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 8.2 (Mehrparametrische Indentität) </strong></span>&nbsp;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">identity</span>(<span class="fu">list</span>(<span class="dv">1</span>, <span class="st">"Daten und Information"</span>, <span class="cn">TRUE</span>))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] 1

[[2]]
[1] "Daten und Information"

[[3]]
[1] TRUE</code></pre>
</div>
</div>
</div>
</section>
<section id="transformationen" class="level3" data-number="8.2.2">
<h3 data-number="8.2.2" class="anchored" data-anchor-id="transformationen"><span class="header-section-number">8.2.2</span> Transformationen</h3>
<p>Transformationen verändern die Werte eines Vektors, wobei das Ergebnis <em>immer</em> ein Ergebnis der Länge des ursprünglichen Vektors hat.</p>
<p>In R sind alle arithmetischen Operatoren Transformatoren (s. <a href="#exm-arithm-transformation">Beispiel&nbsp;<span>8.3</span></a>)</p>
<div id="exm-arithm-transformation" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 8.3 (Additive Transformation eines Zahlenvektors (Skalarprodukt)) </strong></span>&nbsp;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">9</span> , <span class="dv">7</span>, <span class="dv">3</span>, <span class="dv">5</span>) <span class="sc">*</span> <span class="dv">2</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  2 18 14  6 10</code></pre>
</div>
</div>
</div>
<p>Eine besondere Gruppe innerhalb der Transformationen sind die Matrizen-Produkte (<a href="../matrix-operationen/kapitel.html"><span>Kapitel&nbsp;13</span></a>) sowie das Umformen von Vektoren (<a href="../daten-formen/kapitel.html"><span>Kapitel&nbsp;16</span></a>). Diese Transformationen erzeugen aus mehreren Vektoren <em>Vektorfelder</em>, wobei die urspünglichen Werte erhalten bleiben bzw. durch eine Multiplikation umgeformt werden.</p>
</section>
<section id="aggregatoren" class="level3" data-number="8.2.3">
<h3 data-number="8.2.3" class="anchored" data-anchor-id="aggregatoren"><span class="header-section-number">8.2.3</span> Aggregatoren</h3>
<p>Aggregationen fassen Werte eines Vektors zusammen. Das Ergebnis von Aggregatoren ist oft ein einzelner Wert, kann aber auch mehrere Werte umfassen. In solchen Fällen hat das Aggregat höchstens die Länge des Eingabevektors.</p>
<p>Typische Aggregationen sind die Summe (<code>sum()</code>, <a href="#exm-aggregation-sum">Beispiel&nbsp;<span>8.4</span></a>) und andere statistische Kennzahlen (<a href="../daten-beschreiben/kapitel.html"><span>Kapitel&nbsp;17</span></a>).</p>
<div id="exm-aggregation-sum" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 8.4 (Summenaggregation) </strong></span>&nbsp;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>) <span class="sc">|&gt;</span> <span class="fu">sum</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10</code></pre>
</div>
</div>
</div>
</section>
<section id="transformationsverben" class="level3" data-number="8.2.4">
<h3 data-number="8.2.4" class="anchored" data-anchor-id="transformationsverben"><span class="header-section-number">8.2.4</span> Transformationsverben</h3>
<p>Die <code>tidyverse</code>-Bibliothek kennt sog. <strong>Transformationsverben</strong>. Das sind spezielle Funktionen für die Arbeit mit Datenrahmen. Diese Funktionen vereinheitlichen den Umgang mit Daten, indem sie die Komplexität der notwendigen Arbeitsschritte verbergen. Gleichzeitig machen sie die Intention einer Datentransformation sichtbar.</p>
<table class="table">
<caption>Die wichtigsten Transformationsverben der <code>tidyverse</code> Bibliothek{#tbl-transformationsverben}</caption>
<colgroup>
<col style="width: 36%">
<col style="width: 63%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">&nbsp;Funktion</th>
<th style="text-align: left;">Beschreibung</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>mutate()</code></td>
<td style="text-align: left;">&nbsp;Führt eine oder mehrere Transformationen über einen Datenrahmen durch.</td>
</tr>
<tr class="even">
<td style="text-align: left;">&nbsp;<code>arrange()</code></td>
<td style="text-align: left;">&nbsp;Ordnet die Datensätze eines Datenrahmens neu an (<a href="../boolsche-operationen/kapitel.html"><span>Kapitel&nbsp;11</span></a>).</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>summarise()</code></td>
<td style="text-align: left;">&nbsp;Führt eine oder mehrere Aggregationen über einen Datenrahmen durch.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>count()</code></td>
<td style="text-align: left;">Zählt die Anzahl der Datensätze, optional auch entlang gemeinsamer Eigenschaften (<a href="../vektor-operationen/kapitel.html"><span>Kapitel&nbsp;12</span></a>).</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>rename()</code></td>
<td style="text-align: left;">Benennt Vektoren um.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>select()</code></td>
<td style="text-align: left;">Wählt Vektoren in einem Datenrahmen aus.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>filter()</code></td>
<td style="text-align: left;">Aggregiert einen Datenrahmen mithilfe von logischen Ausdrücken (<a href="../boolsche-operationen/kapitel.html"><span>Kapitel&nbsp;11</span></a>)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>group_by()</code>/<code>ungroup()</code></td>
<td style="text-align: left;">Gruppiert einen Datenrahmen mithilfe gemeinsamer Eigenschaften (<a href="../indizieren-gruppieren/kapitel.html"><span>Kapitel&nbsp;14</span></a>)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>pivot_longer()</code>/ <code>pivot_wider()</code></td>
<td style="text-align: left;">Überführt einen Datenrahmen von der Breitform in die Langform, bzw. umgekehrt (<a href="../daten-formen/kapitel.html"><span>Kapitel&nbsp;16</span></a>).</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>nest()</code>/<code>unnest()</code></td>
<td style="text-align: left;">&nbsp;Bettet zusammengehörende Teile eines Datenrahmens als Unterstruktur in einen Datenrahmen ein, bzw. bettet diese Teile aus (<a href="../daten-formen/kapitel.html"><span>Kapitel&nbsp;16</span></a>).</td>
</tr>
</tbody>
</table>
<p>Die beiden wichtigsten Funktionen sind <code>mutate()</code> für Transformationen und <code>summarise()</code> für Aggregationen. Das Ergebnis dieser Funktionen ist immer ein neuer Datenrahmen, welcher die transformierten Daten enthält.</p>
</section>
<section id="generatoren" class="level3" data-number="8.2.5">
<h3 data-number="8.2.5" class="anchored" data-anchor-id="generatoren"><span class="header-section-number">8.2.5</span> Generatoren</h3>
<p>Generatoren bilden eine besondere Funktionsgruppe in R. Mit ihnen lassen sich Werte erzeugen. In dieser Gruppe gibt es zwei Arten:</p>
<ol type="1">
<li>Sequenzgeneratoren</li>
<li>Zufallsgeneratoren</li>
</ol>
<section id="sequenzgeneratoren" class="level4" data-number="8.2.5.1">
<h4 data-number="8.2.5.1" class="anchored" data-anchor-id="sequenzgeneratoren"><span class="header-section-number">8.2.5.1</span> Sequenzgeneratoren</h4>
<p>Sequenzgeneratoren erzeugen Sequenzen von Werten. Sequenzgeneratoren werden in R zur systematischen Erzeugung von Vektoren verwendet.</p>
<p>Die beiden wichtigsten Funktionen dieser Gruppe sind die Funktionen <code>seq()</code> und <code>rep()</code>.</p>
<p>Die Funktion <code>seq()</code> erzeugt eine Sequenz von Werten mit fester Schrittweite. In R wird eine Sequenz über einen Startwert sowie die Länge, die Schrittweite <em>oder</em> den Endwert definiert.</p>
<div id="exm-sequenz" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 8.5 (Sequenzen mit <code>seq()</code> erzeugen) </strong></span>&nbsp;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">5</span>) </span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">2</span>, <span class="dv">5</span>) </span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 3 4 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">2</span>, <span class="at">len =</span> <span class="dv">5</span>) </span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 3 4 5 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">2</span>, <span class="at">len =</span> <span class="dv">3</span>, <span class="at">by =</span> <span class="dv">2</span>) </span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 4 6</code></pre>
</div>
</div>
</div>
<p>Sequenzen mit der Schrittweite <code>0</code> wiederholen den Startwert für die erforderliche Länge. Solche Sequenzen werden relativ häufig verwendet, weshalb <a href="#exm-sequenz-rep">Beispiel&nbsp;<span>8.6</span></a> etwas umständlich ist.</p>
<div id="exm-sequenz-rep" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 8.6 (Einsvektor der Länge 4 mit <code>seq()</code> erzeugen) </strong></span>&nbsp;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">1</span>, <span class="at">len =</span> <span class="dv">4</span>, <span class="at">by =</span> <span class="dv">0</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 1 1 1</code></pre>
</div>
</div>
</div>
<p>Diese Operation kann mit R vereinfacht werden. Hierfür diehnt die Funktion <code>rep()</code> (für <em>replicate</em>). Die Funktion <code>rep()</code> erfordert den Wiederholungswert sowie die Anzahl der Wiederholungen (<a href="#exm-replicate">Beispiel&nbsp;<span>8.7</span></a>).</p>
<div id="exm-replicate" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 8.7 (Einsvektor der Länge 4 mit <code>rep()</code> erzeugen) </strong></span>&nbsp;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">4</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 1 1 1</code></pre>
</div>
</div>
</div>
</section>
<section id="zufallsgeneratoren" class="level4" data-number="8.2.5.2">
<h4 data-number="8.2.5.2" class="anchored" data-anchor-id="zufallsgeneratoren"><span class="header-section-number">8.2.5.2</span> Zufallsgeneratoren</h4>
<div id="def-zufallszahlen" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 8.1 </strong></span><strong>Zufallszahlen</strong> sind numerische Werte, die zufällig ausgewählt werden.</p>
</div>
<p>Zufallszahlen werden in normalen Computer-Programmen relativ selten verwendet.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Merke
</div>
</div>
<div class="callout-body-container callout-body">
<p>Die <strong><em>Anwendungsgebiete</em></strong> von Zufallszahlen sind die <strong>Krypografie</strong> und die <strong>Simualation</strong>.</p>
</div>
</div>
<p>In den Datenwissenschaften sind Simulationen ein wichtiges Werkzeug für analytische und prediktive Modelle, insbesondere für die künstliche Intelligenz.</p>
<p>R bietet die Funktion <code>runif()</code> zur Erzeugung von gleichmässig verteilten Zufallszahlen. Die Funktion generiert zufällig reelle Werte im Intervall von <span class="math inline">\left]0, 1 \right[</span>. In diesem Zusammenhang bedeutet <em>gleichmässig verteilt</em>, dass alle Werte mit gleicher Wahrscheinlichkeit erzeugt werden.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Merke
</div>
</div>
<div class="callout-body-container callout-body">
<p><em>Gleichmässig verteilte</em> Werte werden auch als <strong>uniforme</strong> oder <strong>uniform-verteilte</strong> Werte bezeichnet.</p>
</div>
</div>
<div id="exm-runif" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 8.8 (Fünf Zufallswerte mit <code>runif()</code> erzeugen) </strong></span>&nbsp;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">runif</span>(<span class="dv">5</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.3629035 0.7706022 0.2821078 0.9810012 0.2153341</code></pre>
</div>
</div>
</div>
<p>Aus diesen Werten lassen sich beliebige Zufallsvektoren erzeugen. Um Werte in anderen Intervallen zu erzeugen, können der Funktion eigene Intervallgrenzen übergeben werden.</p>
<p>Werden uniformverteilte Zufallswerte gegenübergestellt, dann sind diese Werte gleichmässig im Intervall verteilt (<a href="#fig-runif">Abbildung&nbsp;<span>8.1</span></a>).</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-runif" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="kapitel_files/figure-html/fig-runif-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Abbildung&nbsp;8.1: Visualisierung von zwei Vektoren mit Zufallswerten</figcaption>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Merke
</div>
</div>
<div class="callout-body-container callout-body">
<p>Ganzzahlen dürfen nicht durch Runden , sondern müssen durch Entfernen des Nachkommaanteils mit <code>trunc()</code> erzeugt werden.</p>
</div>
</div>
<div id="exm-zufallsganzzahlen" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 8.9 (Zufällige Ganzzahlen in einem Intervall erzeugen) </strong></span>&nbsp;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">runif</span>(<span class="dv">10</span>, <span class="at">min =</span> <span class="sc">-</span><span class="dv">10</span>, <span class="at">max =</span> <span class="dv">10</span>) <span class="sc">|&gt;</span> <span class="fu">trunc</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  7 -5  5 -6  8  3  5  8  9  0</code></pre>
</div>
</div>
</div>
<p>Neben den uniformverteilten Werten, stellt R Funktionen zum Erzeugen von Zufallswerten mit anderen Verteilungen an. Die Grundlage für diese Zufallswerte bilden die <em>statistischen Verteilungen</em>, wie z.B. die Normalverteilung (mit <code>rnorm()</code>), die F-Verteilung (mit <code>rf()</code>), die Binomialverteilung (mit <code>rbinom()</code>) oder die <span class="math inline">\chi^2</span>-Verteilung (mit <code>rchisq()</code>).</p>
<p>In diesen Verteilungen sind nicht alle Werte gleich wahrscheinlich. Dadurch erscheinen in einer Visualisierung die Werte geklumpt (<a href="#fig-rnorm">Abbildung&nbsp;<span>8.2</span></a>).</p>
<div class="cell" data-warnings="false">
<div class="cell-output-display">
<div id="fig-rnorm" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="kapitel_files/figure-html/fig-rnorm-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Abbildung&nbsp;8.2: Visualisierung von zwei Vektoren mit normalverteilten Zufallswerten</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell" data-warnings="false">
<div class="cell-output-display">
<div id="fig-rchisq" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="kapitel_files/figure-html/fig-rchisq-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Abbildung&nbsp;8.3: Visualisierung von zwei Vektoren mit <span class="math inline">\chi^2</span>-verteilten Zufallswerten</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="operatoren" class="level2" data-number="8.3">
<h2 data-number="8.3" class="anchored" data-anchor-id="operatoren"><span class="header-section-number">8.3</span> Operatoren</h2>
<p>Alle R-Operatoren sind Funktionen. R kennt 29 vordefinierte Operatoren, die zwei Werte verknüpfen. Zu diesen Operatoren gehören die auch die arithmetischen Operatoren für die Grundrechenarten.</p>
<div id="tbl-r-operatorem" class="anchored">
<table class="table">
<caption>Tabelle&nbsp;8.1: Liste der Base R Operatoren</caption>
<colgroup>
<col style="width: 29%">
<col style="width: 47%">
<col style="width: 23%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Operator</th>
<th style="text-align: left;">Beschreibung</th>
<th style="text-align: left;">Art</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><code>+</code></td>
<td style="text-align: left;">Plus, sowohl unär als auch binär</td>
<td style="text-align: left;">arithmetisch</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>-</code></td>
<td style="text-align: left;">Minus, sowohl unär als auch binär</td>
<td style="text-align: left;">arithmetisch</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>*</code></td>
<td style="text-align: left;">Multiplikation, binär</td>
<td style="text-align: left;">arithmetisch</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>/</code></td>
<td style="text-align: left;">Division, binär</td>
<td style="text-align: left;">arithmetisch</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>^</code></td>
<td style="text-align: left;">Potenz, binär</td>
<td style="text-align: left;">arithmetisch</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>%%</code></td>
<td style="text-align: left;">Modulo, binär</td>
<td style="text-align: left;">arithmetisch</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>%/%</code></td>
<td style="text-align: left;">Ganzzahldivision, binär</td>
<td style="text-align: left;">arithmetisch</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>%*%</code></td>
<td style="text-align: left;">Matrixprodukt, binär</td>
<td style="text-align: left;">arithmetisch, Matrix</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>%o%</code></td>
<td style="text-align: left;">äusseres Produkt, binär</td>
<td style="text-align: left;">arithmetisch, Matrix</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>%x%</code></td>
<td style="text-align: left;">Kronecker-Produkt, binär</td>
<td style="text-align: left;">arithmetisch, Matrix</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>&lt;</code></td>
<td style="text-align: left;">Kleiner als, binär</td>
<td style="text-align: left;">logisch</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>&gt;</code></td>
<td style="text-align: left;">Grösser als, binär</td>
<td style="text-align: left;">logisch</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>==</code></td>
<td style="text-align: left;">Gleich, binär</td>
<td style="text-align: left;">logisch</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>!=</code></td>
<td style="text-align: left;">Ungleich, binär</td>
<td style="text-align: left;">logisch</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>&gt;=</code></td>
<td style="text-align: left;">Grösser oder gleich, binär</td>
<td style="text-align: left;">logisch</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>&lt;=</code></td>
<td style="text-align: left;">Kleiner oder gleich, binär</td>
<td style="text-align: left;">logisch</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>%in%</code></td>
<td style="text-align: left;">Existenzoperator, binär</td>
<td style="text-align: left;">logisch</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>!</code></td>
<td style="text-align: left;">unäres Nicht</td>
<td style="text-align: left;">logisch</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>&amp;</code></td>
<td style="text-align: left;">Und, binär, vektorisiert</td>
<td style="text-align: left;">logisch</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>&amp;&amp;</code></td>
<td style="text-align: left;">Und, binär, nicht vektorisiert</td>
<td style="text-align: left;">logisch</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>|</code></td>
<td style="text-align: left;">Oder, binär, vektorisiert</td>
<td style="text-align: left;">logisch</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>||</code></td>
<td style="text-align: left;">Oder, binär, nicht vektorisiert</td>
<td style="text-align: left;">logisch</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>&lt;-</code>, <code>&lt;&lt;-</code>, <code>=</code></td>
<td style="text-align: left;">linksgerichtete Zuweisung, binär</td>
<td style="text-align: left;">Zuweisung</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>-&gt;</code>, <code>-&gt;&gt;</code></td>
<td style="text-align: left;">rechtsgerichtete Zuweisung, binär</td>
<td style="text-align: left;">Zuweisung</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>[</code></td>
<td style="text-align: left;">Indexzugriff (Vektoren), binär</td>
<td style="text-align: left;">Index</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>$</code>, <code>[[</code></td>
<td style="text-align: left;">Listenzugriff, binär</td>
<td style="text-align: left;">Index</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>~</code></td>
<td style="text-align: left;">funktionale Abhängigkeit, sowohl unär als auch binär</td>
<td style="text-align: left;">Funktionen</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>:</code></td>
<td style="text-align: left;">Sequenz (in Modellen: Interaktion), binär</td>
<td style="text-align: left;">Funktionen</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>|&gt;</code></td>
<td style="text-align: left;">Funktionsverkettung</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>?</code></td>
<td style="text-align: left;">Hilfe</td>
<td style="text-align: left;">spezial</td>
</tr>
</tbody>
</table>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hinweis
</div>
</div>
<div class="callout-body-container callout-body">
<p>Im R-Umfeld wird oft von <strong>Modellen</strong> geschrieben und gesprochen. <em>Modelle</em> sind <em>spezielle Funktionen</em>, die <em>Beziehungen zwischen Daten</em> beschreiben, ohne eine mathematisch exakte Beziehung vorzugeben. Modelle werden in der <em>Statistik</em> und <em>Stochastik</em> eingesetzt, wenn die exakten Beziehungen zwischen Daten unbekannt sind.</p>
</div>
</div>
<div id="exm-exakte-beziehung" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 8.10 (Exakte <em>lineare</em> Beziehung zwischen Daten) </strong></span>&nbsp;</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">=</span> <span class="cf">function</span> (x, c) <span class="dv">2</span> <span class="sc">*</span> x <span class="sc">+</span> <span class="dv">3</span> <span class="sc">*</span> c</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="exm-beziehung-als-modell" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 8.11 (Beziehung zwischen Daten mit Interaktion als Modell) </strong></span>&nbsp;</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">=</span> y <span class="sc">~</span> x <span class="sc">:</span> c</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Hinter jedem Operator steht eine Funktion, die mit den beiden Operanden als Parameter ausgeführt wird, um das Ergebnis des Operators zu bestimmen. Daraus folgt, dass jeder Operator auch als Funktionsbezeichner verwendet werden kann. In diesem Fall muss R mitgeteilt werden, dass der Operator nun als Funktionsbezeichner verwendet werden soll. Der Operator muss also mit Backticks als Bezeichner markiert werden.</p>
<div id="exm-plus-als-fkt" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 8.12 (<code>+</code>-Operator als Funktionsbezeichner) </strong></span>&nbsp;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="st">`</span><span class="at">+</span><span class="st">`</span>(<span class="dv">1</span>, <span class="dv">2</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
</div>
<section id="zuweisung" class="level3" data-number="8.3.1">
<h3 data-number="8.3.1" class="anchored" data-anchor-id="zuweisung"><span class="header-section-number">8.3.1</span> Zuweisung</h3>
<p>R kennt zwei Zuweisungsoperatoren: <code>&lt;-</code> und <code>-&gt;</code>. Die Zuweisung erfolgt in Richtung des Pfeils. Daneben wird der <code>=</code>-Operator ebenfalls als (inoffizieller) Zuweisungsoperator unterstützt.</p>
<p>Ein Zuweisungsoperator erwartet immer einen Bezeichner und eine Operation als Parameter. Das Ergebnis der Operation wird als Wert dem Bezeichner zugewiesen.</p>
<p>Weil nicht immer klar ist, ob <code>&lt;-</code> oder <code>=</code> verwendet werden soll, lautet die offizielle Kommunikation, dass für Variablenzuweisungen der <code>&lt;-</code>-Operator verwendet werden sollte. Das einfache Gleich (<code>=</code>) weist einen Wert einem Funktionsparameter zu. Gerade in <strong>tidy R</strong> ist dieser Unterschied nur schwer nachvollziehbar, weil bestimmte Parameter wie Variablen behandelt werden.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hinweis
</div>
</div>
<div class="callout-body-container callout-body">
<p>In diesem Buch wird für die <em>linksgerichtete Zuweisung</em> immer das Gleichzeichen (<code>=</code>) verwendet, so dass eine Zuweisung eines Werts an eine Variable und an einen Parameter gleichwertig behandelt wird. Dadurch wird die Lesart etwas vereinfacht. Zusätzlich wird die rechtsgerichtete Zuweisung konsequent als Abschluss für einen primären Datenstrom (s. <a href="#sec-fkt-ketten"><span>Kapitel&nbsp;8.4</span></a>) eingesetzt.</p>
</div>
</div>
</section>
<section id="funktionsausführung" class="level3" data-number="8.3.2">
<h3 data-number="8.3.2" class="anchored" data-anchor-id="funktionsausführung"><span class="header-section-number">8.3.2</span> Funktionsausführung</h3>
<p>Der Ausführenoperator (<code>()</code>) gilt in R offiziell nicht als Operator, weil dieser nicht als Funktion umgesetzt werden kann. Es gibt zwar die Funktion <code>do.call()</code>, um eine Funktion auszuführen. Wenn diese Funktion als Ausführungsoperator eingesetzt wird, müsste <code>do.call()</code> sich selbst aufrufen, um sich selbst auszuführen. Dieses Problem wird von R dadurch gelöst, dass <code>(</code> und <code>)</code> als eigene <em>Symbole</em> erkannt werden und immer eine Funktionsausführung anzeigen.</p>
<section id="hilfeoperator" class="level4" data-number="8.3.2.1">
<h4 data-number="8.3.2.1" class="anchored" data-anchor-id="hilfeoperator"><span class="header-section-number">8.3.2.1</span> Hilfeoperator</h4>
<p>Der <em>Hilfeoperator</em> ist ein besonderer Operator, weil dieser die Interaktion mit der Dokumentation von Funktionen und Konzepten ermöglicht. Der Hilfeoperator wird normalerweise nicht in einem R-Script verwendet und hat keine Bedeutung für die Datenverarbeitung.</p>
<p>Der Hilfeoperator kann direkt mit einem Bezeichner aufgerufen werden. Existiert für den Bezeichner eine Dokumentation, dann wird diese angezeigt.</p>
<div id="exm-hilfeop-funktionsname" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 8.13 (Dokumentation der Funktion <code>is.character()</code>) </strong></span>&nbsp;</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>?is.character</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Wird der Hilfeoperator mit sich selbst aufgerufen, wird der nächste Wert als Suchbegriff gewertete und eine Suche über alle Hilfedokumente auf dem System durchgeführt.</p>
<div id="exm-hilfeop-hilfeop" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 8.14 (Dokumentationssuche nach Operatoren) </strong></span>&nbsp;</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>??operator</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
</section>
<section id="sec-fkt-ketten" class="level2" data-number="8.4">
<h2 data-number="8.4" class="anchored" data-anchor-id="sec-fkt-ketten"><span class="header-section-number">8.4</span> Funktionsketten</h2>
<p>R unterstützt die spezielle Funktionsverkettung mit dem <code>|&gt;</code>- Operator. Dadurch lassen sich Funktionsfolgen direkt in R ausdrücken. In Kombination mit der rechtsgerichteten Zuweisung (<code>-&gt;</code>) ist es möglich, Datenströme durch eine Funktionskette von einem Ausgangswert zu einem Ergebnis in der natürlichen Reihenfolge aufzuschreiben.</p>
<div id="exm-fktkette-datenstrom" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 8.15 (Funktionskette mit abschliessender Zuweisung) </strong></span>&nbsp;</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># library(tidyverse)</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">|&gt;</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(Species <span class="sc">==</span> <span class="st">"setosa"</span>) <span class="sc">|&gt;</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(Petal.Length)) <span class="ot">-&gt;</span> </span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>        sortierteSetosaWerte</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Neben der speziellen Funktionsverkettung (<code>|&gt;</code>) gibt es einen sehr ähnlichen Verkettungsoperator: <code>%&gt;%</code>. Dieser Verkettungsoperator ist Teil der <code>tidyverse</code>-Bibliothek und gleicht der speziellen Funktionsverkettung mit dem kleinen Unterschied, dass die Parameterzuweisung für die nachfolgende Funktion zusätzliche Kontrollmöglichkeiten bietet, die der speziellen Funktionsverkettung fehlen.</p>
</section>
<section id="eigene-funktionen-erstellen" class="level2" data-number="8.5">
<h2 data-number="8.5" class="anchored" data-anchor-id="eigene-funktionen-erstellen"><span class="header-section-number">8.5</span> Eigene Funktionen erstellen</h2>
<p>In R werden Funktionen mit dem <code>function</code>-Schlüsselwort erstellt. Eine R-Funktion besteht aus einer Parameterliste und einem Funktionskörper. Die Parameterliste wird in Klammern hinter dem Wort <code>function</code> angegeben. Der Funktionskörper kann eine einzelne Operation oder ein Block sein. Das Ergebnis einer Funktion ist das Ergebnis der letzten Operation des Funktionskörpers.</p>
<p><a href="#exm-function-create">Beispiel&nbsp;<span>8.16</span></a> zeigt eine <em>Funktionsdeklaration</em>, die einen <code>parameter</code> <em>akzeptiert</em>. Die Funktion quadriert diesen Wert und zieht vom Ergebnis <code>1</code> ab. An diesen Operationen wird erkannt, dass die Funktion nur Werte vom Datenyp Zahlen als <code>parameter</code> akzeptiert.</p>
<p>Parameter sind in R spezielle <em>Variablen</em>, mit denen Werte an eine Funktion übergeben werden. Parameter existieren nur <em>innerhalb</em> einer Funktion während der Ausführung des Funktionskörpers. Es kommt sehr häufig vor, dass ausserhalb einer Funktion Variablen mit gleichem Bezeichnern vorhanden sind. Ein Parameter überschreibt diese Variablen <strong>nicht</strong>.</p>
<div id="exm-function-create" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 8.16 (Eine Funktion deklarieren) </strong></span>&nbsp;</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span> (parameter) {</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>    parameter <span class="sc">^</span> <span class="dv">2</span> <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Damit eine Funktion sinnvoll verwendet werden kann, muss sie zuerst einer Variablen zugewiesen werden. Der Bezeichner einer Funktion sollte möglichst die zentrale Bedeutung einer Funktion beschreiben.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hinweis
</div>
</div>
<div class="callout-body-container callout-body">
<p>Die Wahl eines guten Funktionsbezeichners hängt vom jeweiligen Geltungsbereich ab.</p>
<p>Mathematische Funktionen werden oft mit <span class="math inline">f(x)</span> oder <span class="math inline">g(x)</span> usw. geschrieben. In R sind solche Bezeichner ebenfalls zulässig, solange sie <strong>eindeutig</strong> sind. Solche sehr kurzen Funktionsbezeichnern sollten speziell gekennzeichnet und dokumentiert werden.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Praxis
</div>
</div>
<div class="callout-body-container callout-body">
<p>Weil das Schlüsselwort <code>function</code> recht lang ist, behindert es gelegentlich das Lesen sehr einfacher Funktionen. R erlaubt die Definition der Parameterliste mit <code>\()</code> anstatt <code>function ()</code> zu schreiben. Beide Schreibweisen sind gleichbedeutend.</p>
<p><a href="#exm-map">Beispiel&nbsp;<span>8.22</span></a> zeigt die Anwendung der Abkürzung mit <code>\()</code>.</p>
<p>Grundsätzlich sollte das <code>function</code>-Schlüsselwort der Abkürzung vorgezogen werden, wenn eine Funktion einem Bezeichner zugewiesen wird.</p>
</div>
</div>
<p><a href="#exm-function-named-create">Beispiel&nbsp;<span>8.17</span></a> weist der Funktion aus <a href="#exm-function-create">Beispiel&nbsp;<span>8.16</span></a> den Bezeichner <code>quadrat_minus_eins</code> zu. Dieser Bezeichner kann anschliessend als Funktion verwendet werden (s. <a href="#exm-funktion-aufrufen">Beispiel&nbsp;<span>8.18</span></a>).</p>
<div id="exm-function-named-create" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 8.17 (Eine Funktion mit Bezeichner deklarieren) </strong></span>&nbsp;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>quadrat_minus_eins <span class="ot">=</span> <span class="cf">function</span> (parameter) {</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    parameter <span class="sc">^</span> <span class="dv">2</span> <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="exm-funktion-aufrufen" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 8.18 (Eine selbstdeklarierte Funktion aufrufen) </strong></span>&nbsp;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">quadrat_minus_eins</span>(<span class="dv">2</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
</div>
<section id="parameter-und-variablen" class="level3" data-number="8.5.1">
<h3 data-number="8.5.1" class="anchored" data-anchor-id="parameter-und-variablen"><span class="header-section-number">8.5.1</span> Parameter und Variablen</h3>
<p>Ein Parameter ist ein Platzhalter für einen Wert, der einer Funktion beim Funktionsaufruf übergeben wird. Parameter werden für eine spezielle Form der Variablenzuweisung eingesetzt.</p>
<p>Im Funktionskörper verhält sich ein Parameter wie eine Variable. Einem Parameter können also in einem Funktionskörper neue Werte zugewiesen werden. Neben Parametern können Funktionskörper zusätzliche Variablen benötigen. Der Geltungsbereich dieser Variablen sind auf den Funktionskörper beschränkt.</p>
</section>
<section id="datentypen-überprüfen" class="level3" data-number="8.5.2">
<h3 data-number="8.5.2" class="anchored" data-anchor-id="datentypen-überprüfen"><span class="header-section-number">8.5.2</span> Datentypen überprüfen</h3>
<p>Wird der neuen Funktion ein falscher Datentyp als Parameter übergeben, dann können die Rs Fehlermeldungen sehr verwirrend sein. Es ist daher ein guter Stil, Parameter die bestimmte Datentypen erfordern direkt zu Begin des Funktionskörpers zu prüfen (s. <a href="#exm-fkt-datentyp-prüfen">Beispiel&nbsp;<span>8.19</span></a>).</p>
<div id="exm-fkt-datentyp-prüfen" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 8.19 (Eine Funktion mit Typenprüfung deklarieren) </strong></span>&nbsp;</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>quadrat_minus_eins <span class="ot">=</span> <span class="cf">function</span> (parameter) {</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stopifnot</span>(<span class="fu">is.numeric</span>(parameter))</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    parameter <span class="sc">^</span> <span class="dv">2</span> <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="sec-nebeneffekte" class="level3" data-number="8.5.3">
<h3 data-number="8.5.3" class="anchored" data-anchor-id="sec-nebeneffekte"><span class="header-section-number">8.5.3</span> Nebeneffekte</h3>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Wichtig
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Nebeneffekte</strong> sind in (fast) immer unerwünscht. Die in diesem Abschnitt werden die beiden speziellen Zuweisungsoperatoren <code>&lt;&lt;-</code> und <code>-&gt;&gt;</code> vorgestellt, die gezielt <strong>Nebeneffekte</strong> erzeugen.</p>
<p>Dieser Abschnitt beschreibt einen Sonderfall der Variablen- oder Funktionsdeklaration in <strong>speziellen <em>Closures</em></strong> (s.u.), der in R <strong>sehr selten</strong> vorkommt. Die meisten Algorithmen lassen sich <em>nebeneffektsfrei</em> Programmieren, weshalb die beiden speziellen Zuweisungsoperatoren normalerweise nicht verwendet werden.</p>
</div>
</div>
<p>Der Funktionskörper bildet einen abgegrenzten Geltungsbereich für Variablen. Alle normalen Zuweisungen gelten nur für den Funktionskörper, selbst wenn eine Variable oder ein Parameter ursprünglich in einem äusseren Geltungsbereich deklariert wurde.</p>
<div id="exm-variablen-decl" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 8.20 (Geltungsbereich von Variablen in Funktionen) </strong></span>&nbsp;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Deklarationen</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>var1 <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>f <span class="ot">=</span> <span class="cf">function</span> (x) {</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    var1 <span class="ot">=</span> x <span class="sc">+</span> var1</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>    var1</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Anwendung</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(<span class="dv">2</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>var1</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
</div>
<p>In <strong><em>seltenen Fällen</em></strong> ist es notwendig, eine Variable eines äusseren Geltungsbereichs in einer Funktion einen neuen Wert zuzuweisen. Hier kommen die speziellen Zuweisungen <code>&lt;&lt;-</code> und <code>-&gt;&gt;</code> zum Einsatz. Wird anstelle einer normalen Zuweisung die spezielle Zuweisung verwendet, dann wird einer Variablen oder einem Parameter eines äusseren Geltungsbereich ein neuer Wert zugewiesen.</p>
<div id="def-nebeneffekt" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 8.2 </strong></span>Ändert eine Funktion eine Variable eines äusseren Geltungsbereichs, dann ist diese Änderung ein <strong>Nebeneffekt</strong> der Funktion.</p>
</div>
<div id="exm-function-sideeffect" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 8.21 (Funktion mit Nebeneffekt) </strong></span>&nbsp;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Deklarationen</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>var1 <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>f <span class="ot">=</span> <span class="cf">function</span> (x) {</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>    x <span class="sc">+</span> var1 <span class="ot">-&gt;&gt;</span> var1</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>    var1</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Anwendung</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(<span class="dv">2</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>var1</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Praxis
</div>
</div>
<div class="callout-body-container callout-body">
<p>In R sollten ausschliesslich <em>Closures</em> Nebeneffekte haben, wenn eine Closure eine Variable einer generierenden Funktion ändern muss. <strong><em>Dieser Fall tritt sehr selten ein!</em></strong></p>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Wichtig
</div>
</div>
<div class="callout-body-container callout-body">
<p>Variablen mit globalem Geltungsbereich sollten <strong>nie</strong> durch Nebeneffekte geändert werden.</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hinweis
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Objektorientierte Sprachen</strong>, wie Python oder Java, verwenden Nebeneffekte als zentrales Programmierprinzip.</p>
<p><strong>Streng-funktionale Sprachen</strong>, wie Excel, sind <strong><em>nebeneffektfrei</em></strong>.</p>
</div>
</div>
</section>
</section>
<section id="funktionen-als-werte" class="level2" data-number="8.6">
<h2 data-number="8.6" class="anchored" data-anchor-id="funktionen-als-werte"><span class="header-section-number">8.6</span> Funktionen als Werte</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Merke
</div>
</div>
<div class="callout-body-container callout-body">
<p>Eine Funktion ist für R ein Wert wie eine Zahl oder eine Zeichenkette.</p>
</div>
</div>
<p>Im Fall von Funktionen ist der Wert einer Funktion die Funktionsdeklaration. Entsprechend ist es möglich Funktionen zu überschreiben.</p>
<p>Wird nur der Bezeichner einer Funktion eingegeben, gibt R die Funktionsdefinition wie jeden anderen Wert direkt aus.</p>
<section id="callbacks" class="level3" data-number="8.6.1">
<h3 data-number="8.6.1" class="anchored" data-anchor-id="callbacks"><span class="header-section-number">8.6.1</span> Callbacks</h3>
<p>In R werden am häufigsten Funktionen als Parameter an eine andere Funktion übergeben. Im Gegensatz zur Funktionsverkettung ist dabei die Funktion selbst und nicht ihr Ergebnis der Wert des Parameters. Eine Funktion höherer Ordnung implementiert oft den generischen Teil eines Algorithmus und delegiert dem Callback spezifische Aufgaben.</p>
<p>Eine typische Anwendung von Callbacks sind Schleifen. Zwar existieren in R die Schleifenkonzepte <code>while</code>, <code>repeat</code> und <code>for</code>, sie kommen in der Praxis jedoch nie zum Einsatz. Stattdessen kommen fast immer Funktionen höherer Ordnung zum Einsatz. Die Schleife wird durch die Funktion höherer Ordnung realisiert. Der Schleifenblock wird als Callback umgesetzt.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hinweis
</div>
</div>
<div class="callout-body-container callout-body">
<p>Weil R eine vektorbasierte Programmiersprache ist, werden die meisten Operationen automatisch für alle Elemente eines Vektors ausgeführt. Dadurch sind viele Schleifen unnötig, die in anderen Programmiersprachen erforderlich sind.</p>
</div>
</div>
<p>Die Funktionen der Bibliothek <code>purrr</code> oder deren Schwesterbibliothek <code>furrr</code> sind der einfachste Weg in R, um das Verhalten von Schleifen funktional umzusetzten. Dabei sind zwei Funktionen zentral:</p>
<ul>
<li><code>map()</code> für Operationen, die für jedes Element unabhängig ausgeführt werden können. Diese Operationen sind <em>immer</em> Transformationen. Die Funktion hat immer eine Liste als Ergebnis. Falls ein Vektor benötigt wird, kann dieser durch eine Verkettung mit <code>unlist()</code> oder mit der Funktion <code>map_vec()</code> erzeugt werden (s. <a href="#exm-map">Beispiel&nbsp;<span>8.22</span></a>).</li>
<li><code>reduce()</code> für Operationen, die ein oder mehrere Elemente gemeinsam berücksichtigen. Diese Operationen sind <em>meistens</em> Aggregationen. (s. <a href="#exm-fibonacci-reduce">Beispiel&nbsp;<span>8.23</span></a>)</li>
</ul>
<div id="exm-map" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 8.22 (Lineartransformation mit <code>map()</code>) </strong></span>&nbsp;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(<span class="fu">rbinom</span>(<span class="dv">10</span>, <span class="dv">7</span>, .<span class="dv">5</span>), \(x) x <span class="sc">-</span> <span class="dv">4</span>) <span class="sc">|&gt;</span> <span class="fu">unlist</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] -1  0  0 -1 -2  1 -3 -1  2 -1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Alternativ</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">map_vec</span>(<span class="fu">rbinom</span>(<span class="dv">10</span>, <span class="dv">7</span>, .<span class="dv">5</span>), \(x) x <span class="sc">-</span> <span class="dv">4</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] -1  0  0 -3 -1  0 -1 -2 -2 -1</code></pre>
</div>
</div>
</div>
<div id="exm-fibonacci-reduce" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 8.23 (Berechnung des n-ten Werts der Fibonacci-Reihe mit <code>reduce()</code>) </strong></span>&nbsp;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">=</span> <span class="dv">6</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>fib_add <span class="ot">=</span> <span class="cf">function</span> (a, b) <span class="fu">c</span>(a[<span class="dv">2</span>], a[<span class="dv">1</span>] <span class="sc">+</span> a[<span class="dv">2</span>])</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="fu">reduce</span>(<span class="fu">seq</span>(<span class="dv">2</span>, <span class="at">len =</span> n<span class="dv">-1</span>), fib_add, <span class="at">.init =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>))[<span class="dv">2</span>]</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8</code></pre>
</div>
</div>
</div>
</section>
<section id="closures" class="level3" data-number="8.6.2">
<h3 data-number="8.6.2" class="anchored" data-anchor-id="closures"><span class="header-section-number">8.6.2</span> Closures</h3>
<p><em>Closures</em> sind Funktionen, die von anderen Funktionen erzeugt und als Ergebnis zurückgegeben werden. Eine Closure bleibt mit der Ausführung der erzeugenden Funktion auch nach Rückgabe verbunden. Dadurch ergeben sich Anwendungen, mit denen sich Funktionsaufrufe vereinfachen lassen.</p>
<div id="exm-closure" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 8.24 (Closure zum systematischen Quadrieren oder Kubieren) </strong></span>&nbsp;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>potenz_factory <span class="ot">=</span> <span class="cf">function</span>(e) <span class="cf">function</span> (x) x <span class="sc">^</span> e</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>quadrieren <span class="ot">=</span> <span class="fu">potenz_factory</span>(<span class="dv">2</span>)</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>kubieren <span class="ot">=</span> <span class="fu">potenz_factory</span>(<span class="dv">3</span>)</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a><span class="fu">quadrieren</span>(<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  4  9 16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kubieren</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1  8 27</code></pre>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Praxis
</div>
</div>
<div class="callout-body-container callout-body">
<p>Closures werden in R meistens in Verbindung mit Callbacks verwendet. Die generierende Funktion konfiguriert die Callbacks mit ihren Parametern, so dass diese in den Callbacks verwendet werden können. Ein solches Vorgehen ist immer dann sinnvoll, wenn sehr ähnliche Logik in mehreren Callbacks vorkommt und abstrahiert werden kann.</p>
</div>
</div>
<div id="exm-closure" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 8.25 (Closure mit Callback verbinden) </strong></span>&nbsp;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>potenz_reduzierer <span class="ot">=</span> <span class="cf">function</span>(e) <span class="cf">function</span> (p, x) p <span class="sc">+</span> x <span class="sc">^</span> e</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="fu">reduce</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="fu">potenz_reduzierer</span>(<span class="dv">1</span>)) <span class="co"># Summe </span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">reduce</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="fu">potenz_reduzierer</span>(<span class="dv">2</span>)) <span class="co"># Quadrat-Summe</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 14</code></pre>
</div>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">reduce</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="fu">potenz_reduzierer</span>(<span class="dv">3</span>)) <span class="co"># Kubik-Summe</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 36</code></pre>
</div>
</div>
</div>
</section>
</section>
<section id="bibliotheken" class="level2" data-number="8.7">
<h2 data-number="8.7" class="anchored" data-anchor-id="bibliotheken"><span class="header-section-number">8.7</span> Bibliotheken</h2>
<p>Oft ist es nicht notwendig eigene Funktionen zu erstellen. Stattdessen kann in vielen Fällen auf Funktionsbibliotheken zurückgegriffen werden, die bereits entsprechende Funktionen bereitstellen.</p>
<p>R wird durch Funktionsbibliotheken erweitert. Eine Funktionsbibliothek stellt hauptsächlich Funktionen und Operationen für bestimme Algorithmen oder Analysemethoden bereit. Eine Funktionsbibliothek wird mit der Funktion <code>install.packages()</code> auf einem Rechner installiert.</p>
<p>In einem R-Script lassen sich die Funktionen einer Bibliothek auf zwei Arten nutzen:</p>
<ol type="1">
<li>Die Bibliothek wird mithilfe der Funktion <code>library()</code> in den Code eingebunden.</li>
<li>Eine Funktion einer Bibliothek wird direkt angesprochen.</li>
</ol>
<p>Die erste Option bietet sich an, wenn ein Script viele Funktionen einer Bibliothek aufrufen wird. R läd in diesem Fall <em>alle Funktionen</em> der Bibliothek, so dass diese direkt verwendet werden können.</p>
<div id="exm-fkt-library-load" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 8.26 (Funktionen mit der <code>library()</code> Funktion einbinden) </strong></span>&nbsp;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">|&gt;</span> </span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(mpg, hp)) <span class="sc">+</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_point</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="kapitel_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<p>Die zweite Option ist sinnvoll, wenn nur eine oder zwei Funktionen einer Bibliothek verwendet werden sollen. In diesem Fall muss R nicht die gesamte Bibliothek bereitstellen, sondern läd gezielt nur die gewünschten Funktionen.</p>
<div id="exm-fkt-direct-access" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 8.27 (Eine Funktion direkt ansprechen) </strong></span>&nbsp;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">|&gt;</span> </span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(hp <span class="sc">&gt;</span> <span class="dv">200</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                     mpg cyl disp  hp drat    wt  qsec vs am gear carb
Duster 360          14.3   8  360 245 3.21 3.570 15.84  0  0    3    4
Cadillac Fleetwood  10.4   8  472 205 2.93 5.250 17.98  0  0    3    4
Lincoln Continental 10.4   8  460 215 3.00 5.424 17.82  0  0    3    4
Chrysler Imperial   14.7   8  440 230 3.23 5.345 17.42  0  0    3    4
Camaro Z28          13.3   8  350 245 3.73 3.840 15.41  0  0    3    4
Ford Pantera L      15.8   8  351 264 4.22 3.170 14.50  0  1    5    4
Maserati Bora       15.0   8  301 335 3.54 3.570 14.60  0  1    5    8</code></pre>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hinweis
</div>
</div>
<div class="callout-body-container callout-body">
<p>R bietet sog. Meta-Bibliotheken an, mit denen mehrere Bibliotheken gemeinsam verwendet werden können. Funktionen können nur nicht über den Namen einer Meta-Bibliothek, sondern immer nur über die Bibliothek, die einer Funktion definiert.</p>
</div>
</div>
<p>Die <code>tidyverse</code>-Bibliothek ist eine solche Meta-Bibliothek. <a href="#exm-fkt-dir-ansprechen-meta">Beispiel&nbsp;<span>8.28</span></a> zeigt wie die Funktion <code>read_delim()</code> direkt angesprochen werden kann, wenn die <code>tidyverse</code>-Bibliotheken nicht mit <code>library(tidyverse)</code> eingebunden wurden. <code>read_delim()</code> wird in der Bibliothek <code>readr</code> definiert. Entsprechend kann die Funktion nur über <code>readr::read_delim()</code> aufgerufen werden.</p>
<div id="exm-fkt-dir-ansprechen-meta" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 8.28 (Funktion aus Unterbibliothek direkt ansprechen) </strong></span>&nbsp;</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">read_delim</span>(<span class="st">"meine_daten.csv"</span>)</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="co"># entspricht:</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="co">#   library(tidyverse)</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   read_delim("meine_daten.csv")</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hinweis
</div>
</div>
<div class="callout-body-container callout-body">
<p>Die Syntax von R kann durch Module erweitert werden. Diese Form nutzt die Konzepte zur <strong>Metaprogrammierung</strong> von R. Dadurch können neue Programmierkonzepte in die Sprache einfliessen. Die <code>tidyverse</code>-Bibliotheken nutzen diese Möglichkeit intensiv. Solche Bibliotheken <strong>müssen</strong> mit der Funktion <code>library()</code> eingebunden werden, damit die zusätzliche Syntax bereitgestellt wird.</p>
</div>
</div>
</section>
<section id="bibliotheken-verwalten" class="level2" data-number="8.8">
<h2 data-number="8.8" class="anchored" data-anchor-id="bibliotheken-verwalten"><span class="header-section-number">8.8</span> Bibliotheken verwalten</h2>
<p>Verwendet ein R-Script Funktionsbibliotheken, dann ist dieses Script nur auf Rechnern lauffähig, auf denen die benutzten Bibliotheken auch installiert sind. Solche notewendigen Bibliotheken heissen die <strong>Abhängigkeiten</strong> (engl. <em>dependencies</em>) eines Scripts. Weil sich die Abhängikeiten nicht immer leicht erkennen lassen, müssen alle Abhängigkeiten müssen dokumentiert werden.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Praxis
</div>
</div>
<div class="callout-body-container callout-body">
<p>Im Internet gibt es sehr viele Beispiele, die die Funktion <code>install.packages()</code> als Teil des Programmcodes darstellen. In konkreten R-Projekten sollte die Funktion <code>install.packages()</code> <strong>nie</strong> in einem normalen R-Script aufgerufen werden, weil bei jedem Start des Script geprüft wird, ob eine neue Version der Bibliothek existiert. Diese Technik stellt ein Sicherheitsrisiko dar, weil bei jeder Ausführung des Scripts Installationen unkontrolliert vorgenommen werden können und Schadcode auf die Systeme geschleust werden kann.</p>
<p>Das Risiko unkontrollierter Installationen wird verringert, indem Installationen von der Programmlogik getrennt und nur kontrolliert durchgeführt werden. Dadurch wird die Installation von Funktionsbibliotheken von ihrer Anwendung getrennt.</p>
</div>
</div>
<p>Die Dokumentation von Abhängigkeiten wird normalerweise von einem sog. Packetmanagement übernommen. R verfügt über <em>kein integriertes</em> Packetmanagement. Dieses wird von der Bibliothek <code>renv</code> übernommen. Bevor dieses genutzt werden kann muss <code>renv</code> mit <code>install.packages("renv")</code> installiert werden.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Praxis
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>renv</code> sollte bei der Installation von R gleich mitinstalliert werden.</p>
</div>
</div>
<p><code>renv</code> ist ein Packetmanagementsystem für R. Anders als die Funktion <code>install.packages()</code> installiert <code>renv</code> nicht nur Bibliotheken, sondern dokumentiert auch die Abhängigkeiten eines Projekts in einer Form, dass alle Abhängigkeiten einfach auf dem System installiert werden können. Mit <code>renv::restore()</code> lässt sich ein Projekt in einer anderen Umgebung mit allen Abhängigkeiten konfigurieren und ausführen.</p>
<p>Wird eine Bibliothek mit <code>renv</code> installiert, dann steht diese Bibliothek nur dem jeweiligen Projekt zur Verfügung. Was auf dem ersten Blick als Nachteil klingt, ist ein grosser Vorteil, wenn unterschiedliche Projekte besonderen Anforderungen an die Versionen einer Bibliothek haben. Auf diese Weise kann jedes Projekt die richtige Version einer Bibliothek verwenden und beeinflusst keine anderen Projekte.</p>
<section id="projektvorbereitung" class="level3" data-number="8.8.1">
<h3 data-number="8.8.1" class="anchored" data-anchor-id="projektvorbereitung"><span class="header-section-number">8.8.1</span> Projektvorbereitung</h3>
<p>Ein Projekt wird mit <code>renv::init()</code> für die Verwendung des Packetmanagements vorbereitet. Beim ersten Aufruf von <code>renv</code> werden die internen Abhängigkeiten von <code>renv</code> kontrolliert und notfalls installiert. Das nimmt etwas Zeit in Anspruch.</p>
<p>Das Packetmanagement erfasst automatisch alle Bibliotheken, die systemweit installiert wurden. Dadurch wird sichergestellt, dass alle Bibliotheken berücksichtigt wurden, die im eigenen System installiert sind und deshalb auch im Projekt verwendet werden können. Die Einzige Ausnahme davon ist <code>renv</code> selbst.</p>
</section>
<section id="bibliotheken-installieren" class="level3" data-number="8.8.2">
<h3 data-number="8.8.2" class="anchored" data-anchor-id="bibliotheken-installieren"><span class="header-section-number">8.8.2</span> Bibliotheken installieren</h3>
<p>Nach der Initialisierung des Packetmanagements können projektspezifische Bibliotheken mit <code>renv::install()</code> installiert werden. War eine Installation erfolgreich, sollte die Bibliothek auf ihre Funktionstüchtigkeit mit einem einfachen Beispiel geprüft und danach mit <code>renv::snapshot()</code> als Abhängigkeit dokumentiert werden. Mit einem <em>Snapshot</em> wird eine Bibliotheksversion als Abhängigkeit registiert. Im Gegensatz zu <code>install.packages()</code> wird ab diesem Zeitpunkt nicht mehr eine beliebige Version der Bibliothek installiert, sondern nur die dokumentierte Version. Dadurch wird sichergestellt, dass der Code auch in anderen Umgebungen wie erwartet funktioniert.</p>
</section>
<section id="bibliotheken-updaten" class="level3" data-number="8.8.3">
<h3 data-number="8.8.3" class="anchored" data-anchor-id="bibliotheken-updaten"><span class="header-section-number">8.8.3</span> Bibliotheken updaten</h3>
<p>Eine Besonderheit von <code>renv</code> ist die Möglichkeit, kontrollierte Updates für einzelne oder alle Abhängigkeiten eines Projekts mit <code>renv::update()</code> durchzuführen. <code>renv::update()</code> installiert die neusten Versionen der Projektbibliotheken.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Merke
</div>
</div>
<div class="callout-body-container callout-body">
<p>Updates sollten nie unklontrolliert akzeptiert werden!</p>
</div>
</div>
<p>Bevor neue Bibliotheksversionen in das Packetmanagement aufgenommen werden, sollte immer geprüft werden, ob der bestehende Code mit den neuen Versionen immer noch funktioniert. Sollten bei dieser Prüfung Probleme auftreten, dann können die Updates mit <code>renv::revert()</code> wieder rückgängig gemacht werden. Gab es keine Probleme, dann können die Updates mit <code>renv::snapshot()</code> übernommen werden.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Kopiert");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Kopiert");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../kapitel/daten-importieren-exportieren/kapitel.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Importieren und Exportieren</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../kapitel/zeichenketten/kapitel.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Zeichenketten</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>